<div class="dashboard-container">
  <mat-toolbar color="primary" class="dashboard-header">
    <h1>ðŸ“Š Dashboard</h1>
    <span class="spacer"></span>
    <button mat-raised-button color="accent">
      <mat-icon>refresh</mat-icon>
      Aggiorna
    </button>
  </mat-toolbar>

  <!-- Stats Cards -->
  <div class="stats-grid" *ngIf="stats$ | async as stats">
    <mat-card class="stat-card">
      <mat-card-header>
        <div mat-card-avatar class="stat-icon primary">
          <mat-icon>inventory_2</mat-icon>
        </div>
        <mat-card-title>Prodotti</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-value">{{ stats.totalProducts }}</div>
        <p class="stat-label">Articoli in magazzino</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-header>
        <div mat-card-avatar class="stat-icon accent">
          <mat-icon>shopping_cart</mat-icon>
        </div>
        <mat-card-title>Ordini</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-value">{{ stats.totalOrders }}</div>
        <p class="stat-label">Ordini totali</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-header>
        <div mat-card-avatar class="stat-icon warn">
          <mat-icon>games</mat-icon>
        </div>
        <mat-card-title>Giochi</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-value">{{ stats.gameCount }}</div>
        <p class="stat-label">Giochi disponibili</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-header>
        <div mat-card-avatar class="stat-icon success">
          <mat-icon>sync</mat-icon>
        </div>
        <mat-card-title>Ultimo Sync</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-value">{{ stats.lastSync | date: 'short' }}</div>
        <p class="stat-label">Data ultimo aggiornamento</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Recent Orders -->
  <div class="recent-section">
    <mat-card>
      <mat-card-header>
        <mat-card-title>ðŸ“‹ Ordini Recenti</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-list *ngIf="recentOrders$ | async as orders; else noOrders">
          <mat-list-item *ngFor="let order of orders">
            <mat-icon matListItemIcon [color]="getOrderStatusColor(order.status)">
              {{ order.status === 'delivered' ? 'check_circle' : 'schedule' }}
            </mat-icon>
            <div matLine>
              <strong>Ordine #{{ order.id }}</strong>
            </div>
            <div matLine>
              Status: <mat-chip [color]="getOrderStatusColor(order.status)" selected>
                {{ order.status }}
              </mat-chip>
            </div>
            <div matLine class="secondary-text">
              â‚¬ {{ order.totalPrice | number: '1.2-2' }} â€¢
              {{ order.createdAt | date: 'short' }}
            </div>
          </mat-list-item>
        </mat-list>

        <ng-template #noOrders>
          <p class="no-data-text">Nessun ordine disponibile</p>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Quick Actions -->
  <div class="actions-section">
    <mat-card>
      <mat-card-header>
        <mat-card-title>âš¡ Azioni Rapide</mat-card-title>
      </mat-card-header>
      <mat-card-content class="actions-grid">
        <button mat-raised-button color="primary" class="action-btn">
          <mat-icon>add_circle</mat-icon>
          Nuovo Articolo
        </button>
        <button mat-raised-button color="accent" class="action-btn">
          <mat-icon>sync</mat-icon>
          Sincronizza
        </button>
        <button mat-raised-button color="warn" class="action-btn">
          <mat-icon>list</mat-icon>
          Visualizza Inventario
        </button>
        <button mat-raised-button class="action-btn">
          <mat-icon>settings</mat-icon>
          Impostazioni
        </button>
      </mat-card-content>
    </mat-card>
  </div>
</div>

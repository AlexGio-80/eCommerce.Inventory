<div class="sales-dashboard">
  <h2>Dashboard Vendite</h2>

  <!-- KPI Metrics -->
  <div class="metrics" *ngIf="salesMetrics">
    <div class="metric-item">
      <h3>Fatturato Totale</h3>
      <p>{{ salesMetrics.totalRevenue | currency:'EUR':'symbol':'1.2-2' }}</p>
    </div>
    <div class="metric-item">
      <h3>Totale Ordini</h3>
      <p>{{ salesMetrics.totalOrders }}</p>
    </div>
    <div class="metric-item">
      <h3>Valore Medio Ordine</h3>
      <p>{{ salesMetrics.averageOrderValue | currency:'EUR':'symbol':'1.2-2' }}</p>
    </div>
    <div class="metric-item">
      <h3>Crescita</h3>
      <p>{{ salesMetrics.growthPercentage }}%</p>
    </div>
  </div>

  <!-- Sales Trend Chart -->
  <div class="chart-container" *ngIf="salesChartData">
    <canvas baseChart [data]="{ datasets: [{ data: chartValues, label: 'Fatturato' }], labels: chartLabels }"
      [options]="chartOptions" [legend]="true" chartType="line">
    </canvas>
  </div>

  <!-- Top Products Grid -->
  <h3>Prodotti Più Venduti</h3>
  <ag-grid-angular class="ag-theme-alpine" style="width: 100%; height: 300px;" [rowData]="topProducts"
    [columnDefs]="topProductsColumnDefs">
  </ag-grid-angular>

  <!-- Sales By Game Grid -->
  <h3>Vendite per Gioco</h3>
  <ag-grid-angular class="ag-theme-alpine" style="width: 100%; height: 250px; margin-bottom: 24px;"
    [rowData]="salesByGame" [columnDefs]="salesByGameColumnDefs">
  </ag-grid-angular>

  <!-- Top Expansions Grid -->
  <div class="top-expansions-section" *ngIf="topExpansionsByValue.length > 0">
    <h3>Espansioni più Convenienti (Valore Medio Carta)</h3>
    <ag-grid-angular class="ag-theme-alpine" style="width: 100%; height: 250px;" [rowData]="topExpansionsByValue"
      [columnDefs]="topExpansionsColumnDefs">
    </ag-grid-angular>
  </div>
</div>